<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Urban Mobility Explorer</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>NYC Taxi Trip Dashboard</h1>
    <div class="filters">
        <label>Date: <input type="date" id="date-filter"></label>
        <label>Min Distance (mi): <input type="number" id="min-distance-filter" step="0.1" min="0"></label>
        <button id="apply-filters">Apply Filters</button>
    </div>
    
    <h2>Summary Visualizations</h2>
    <div class="dashboard-container">
        <!-- Most Recent Trip Card -->
        <div class="trip-card">
            <div class="card-header">
                <h2>üìä Most Recent Trip</h2>
                <div class="live-indicator">
                    <span class="pulse"></span>
                    LIVE
                </div>
            </div>
            
            <div class="trip-stats">
                <div class="stat-item">
                    <div class="stat-icon">üïí</div>
                    <div class="stat-info">
                        <label>Pickup Time</label>
                        <span class="stat-value" id="recent-pickup-time">Loading...</span>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-icon">üìè</div>
                    <div class="stat-info">
                        <label>Distance</label>
                        <span class="stat-value" id="recent-distance">Loading...</span>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-icon">‚è±Ô∏è</div>
                    <div class="stat-info">
                        <label>Duration</label>
                        <span class="stat-value" id="recent-duration">Loading...</span>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-icon">üöÄ</div>
                    <div class="stat-info">
                        <label>Speed</label>
                        <span class="stat-value" id="recent-speed">Loading...</span>
                    </div>
                </div>
            </div>
            
            <div class="card-footer">
                <span class="trip-id" id="recent-trip-id">ID: Loading...</span>
            </div>
        </div>

        <!-- Main Chart with Loading Animation -->
        <div class="chart-container">
            <div class="chart-header">
                <h2>Tips per Hour</h2>
                <div class="loading-indicator">
                    <div class="loading-spinner"></div>
                    <span class="loading-text">Loading, please wait...</span>
                </div>
            </div>
            
            <div class="chart-placeholder">
                <div class="chart-skeleton">
                    <div class="skeleton-bar" style="--height: 60%; --delay: 0s"></div>
                    <div class="skeleton-bar" style="--height: 80%; --delay: 0.1s"></div>
                    <div class="skeleton-bar" style="--height: 45%; --delay: 0.2s"></div>
                    <div class="skeleton-bar" style="--height: 90%; --delay: 0.3s"></div>
                    <div class="skeleton-bar" style="--height: 65%; --delay: 0.4s"></div>
                    <div class="skeleton-bar" style="--height: 75%; --delay: 0.5s"></div>
                    <div class="skeleton-bar" style="--height: 50%; --delay: 0.6s"></div>
                </div>
            </div>
            <canvas id="tripsPerHourChart" width="400" height="200" style="display: none;"></canvas>
        </div>
    </div>
    
    
    
    <h2>Trip Details Table</h2>
    <div class="pagination-info">
        Showing <span id="showing-count">0</span> of <span id="total-count">0</span> trips
    </div>
    <div class="pagination-controls">
        <button id="prev-page" disabled>Previous</button>
        <span id="page-info">Page 1 of 1</span>
        <button id="next-page" disabled>Next</button>
        <select id="per-page">
            <option value="20">20 per page</option>
            <option value="50" selected>50 per page</option>
            <option value="100">100 per page</option>
            <option value="200">200 per page</option>
        </select>
    </div>
    <div class="table-container">
        <table id="tripsTable">
            <thead>
                <tr>
                    <th>Trip ID</th>
                    <th>Pickup Time</th>
                    <th>Distance (mi)</th>
                    <th>Speed (mph)</th>
                    <th>Duration (min)</th>
                </tr>
            </thead>
            <tbody id="tripsTableBody">
                <tr><td colspan="5">Loading data...</td></tr>
            </tbody>
        </table>
    </div>
    
    <h2>Key Insights</h2>
    <div id="insights">
        <div>Loading insights...</div>
    </div>
    <script src="scripts.js"></script>
</body>
</html>